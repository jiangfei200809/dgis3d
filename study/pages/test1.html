<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8>
    <title>test01</title>
    <style>
        html,
        body {
            margin: 0;
            width: 100%;
            height: 100%
        }

        .stage {
            width: 100%;
            height: 100%
        }
    </style>

    <script src="../assets/js/jquery-1.10.2.min.js"></script>
    <script src="../assets/js/three.js"></script>
    <script>
        var canvasMouseDown=false;
        var preMousePt=null;

        var renderer,scene, camera;

        function init() {
            scene = new THREE.Scene(); // 创建场景

            var width = document.getElementById('stage').offsetWidth;
            var height = document.getElementById('stage').offsetHeight;
            camera = new THREE.PerspectiveCamera(90, width / height, 1, 1000);
            camera.position.set(200, 0, 1000);

            var materials = [];
            for (var i = 0; i < 6; i++) {
                var texture = THREE.ImageUtils.loadTexture("../assets/images/" + i + ".png", {}, function () {
                    renderer.render(scene, camera);
                });
                //texture.repeat.set(4, 4);
                texture.wrapS = texture.wrapT = THREE.RepeatWrapping;

                var meterial = new THREE.MeshLambertMaterial({
                    map: texture,
                    overdraw: true
                });

                materials.push(meterial);
            }

            var mesh = new THREE.Mesh(new THREE.CubeGeometry(150, 250, 150),
                new THREE.MeshFaceMaterial(materials)
            );

            mesh.position.set(100, 100, 100);
            scene.add(mesh);

            var mesh1 = new THREE.Mesh(new THREE.CubeGeometry(100, 100, 100),
                new THREE.MeshPhongMaterial({

                })
                /*new THREE.MeshLambertMaterial({
                    map: THREE.ImageUtils.loadTexture("../assets/images/box.jpg", {}, function () {
                        renderer.render(scene, camera);
                    })
                })*/
            );
            mesh1.position.set(400, 100, 200);
            scene.add(mesh1);

            var light = new THREE.DirectionalLight("white", 1, 10000);
            light.position.set(600, 100, 500);

            scene.add(camera);
            scene.add(light);

            renderer = new THREE.WebGLRenderer({
                canvas: document.getElementById('stage')
            });
            renderer.setClearColor("white");



            setInterval(function () {
                mesh.rotation.x += 0.05;
                mesh.rotation.y += 0.05;

                mesh1.rotation.x += 0.01;
                mesh1.rotation.y += 0.01;

                renderer.render(scene, camera);
            }, 40);
        }

        function load() {
            init();
            //animate();

            $(document).on("mousedown","#stage",function(e){
                if(e.button==0){
                    canvasMouseDown=true;
                    preMousePt=[e.clientX,e.clientY];
                }
            }).on("mouseup","#stage",function(e){
                canvasMouseDown=false;

            }).on("mousemove","#stage",function(e){
                if(canvasMouseDown){
                    var x=e.clientX-preMousePt[0];
                    var y=e.clientY-preMousePt[1];

                    if(x>10||x<-10||y>10||y<-10){
                        camera.position.set(camera.position.x-x, camera.position.y+y,camera.position.z);
                        
                        preMousePt=[e.clientX,e.clientY];
                        renderer.render(scene, camera);
                    }
                }
            }).on("mousewheel","#stage",function(e,f){
                var z=e.originalEvent.deltaY;                
                camera.fov+=z/50;
                //camera.position.set(camera.position.x, camera.position.y,camera.position.z+=z/50);

 camera.updateProjectionMatrix();
renderer.render(scene, camera);
            });
        }
    </script>

</head>

<body onload="load()">
    <canvas id="stage" width="1800px" height="900px"></canvas>
</body>

</html>